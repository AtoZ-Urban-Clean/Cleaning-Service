<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="atoz.png">

<meta charset="UTF-8">
<title>AtoZ Urban Clean – Services</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    :root {
        --primary-color: #ff007f;
        --bg-light: #f8f9fa;
        --text-dark: #333;
        --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    body {
        margin: 0;
        font-family: 'Segoe UI', Arial, sans-serif;
        background: var(--bg-light);
    }

    header#pageHeader {
        background: #fff;
        padding: 25px;
        text-align: center;
        font-size: 28px;
        font-weight: 700;
        border-bottom: 1px solid #eee;
    }

    .container {
        display: flex;
        max-width: 1400px;
        margin: 0 auto;
        gap: 25px;
        padding: 20px;
    }

    /* MOBILE FILTER BUTTON */
    .filter-toggle {
        display: none; /* Hidden on desktop */
        width: 100%;
        padding: 12px;
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 8px;
        margin-bottom: 15px;
        font-weight: 600;
        cursor: pointer;
    }

    .filters {
        width: 280px;
        background: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: var(--shadow);
        height: fit-content;
        position: sticky;
        top: 20px;
    }

    .filter-title { font-weight: 700; margin: 15px 0 5px; color: #666; font-size: 13px; text-transform: uppercase; }
    .filters select { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ddd; margin-bottom: 10px; }

    .products {
        flex: 1;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 25px;
    }

    .card {
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: var(--shadow);
        transition: transform 0.3s;
    }

    .card:hover { transform: translateY(-5px); }
    .card img { width: 100%; height: 200px; object-fit: cover; }
    .card-info { padding: 15px; }
    .card h3 { margin: 0 0 5px; font-size: 18px; }
    .card h5 { margin: 0 0 10px; color: #777; font-weight: 400; }

    .price { display: flex; align-items: center; gap: 8px; font-size: 18px; }
    .price del { color: #aaa; font-size: 14px; }

    .book {
        display: block;
        text-align: center;
        margin: 15px;
        padding: 12px;
        background: var(--primary-color);
        color: #fff;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 700;
    }

    /* MOBILE VIEW FIXES */
    @media (max-width: 900px) {
        .container { flex-direction: column; }
        .filter-toggle { display: block; } /* Show button */
        .filters { 
            display: none; /* Hide filters by default on mobile */
            width: 100%; 
        }
        .filters.active { display: block; } /* Show when toggled */
    }
</style>

</head>

<body>

<div id="header"></div>
<header id="pageHeader">All Services</header>

<div class="container">

<!-- FILTER PANEL -->
<button class="filter-toggle" onclick="toggleMobileFilters()">
    <i class="fas fa-filter"></i> Filters & Sorting
</button>

<div class="filters" id="filterPanel">
    <div class="filter-main-header">Refine Results</div>

    <div class="filter-title">Category</div>
    <select id="categoryFilter">
        <option value="all">All Services</option>
        <option value="basic">Basic Cleaning</option>
        <option value="deep">Deep Cleaning</option>
        <option value="Commercial">Commercial</option>
        <option value="premium">Premium Cleaning</option>
        <option value="shifting">House Shifting</option>
    </select>

    <div class="filter-title">Price</div>
    <select id="priceSort">
        <option value="none">Default Sorting</option>
        <option value="low">Price: Low to High</option>
        <option value="high">Price: High to Low</option>
    </select>

    <div class="filter-title">Rating</div>
    <select id="ratingFilter">
        <option value="all">All Ratings</option>
        <option value="4">4★ & above</option>
        <option value="5">5★ only</option>
    </select>
</div>

<!-- PRODUCTS -->
<div class="products" id="productList">

<!-- CARD 1-->
<div class="card" data-category="basic" data-price="99" data-rating="5">
<img src="Window & Door cleaning.jpg">
<h3>Window Cleaning</h3>
<h5>Quantity 1</h5>
<div class="price"><del>₹200</del> <b>₹99</b></div>
<a class="book" href="#"
   onclick="addToCart('Window Cleaning',99); return false;">
   Book Now
</a>

</div>

<!-- CARD 2-->
<div class="card" data-category="basic" data-price="99" data-rating="5">
<img src="Door cleaning.jpg">
<h3>Door Cleaning</h3>
<h5>Quantity 1</h5>
<div class="price"><del>₹200</del> <b>₹99</b></div>
<a class="book" href="#"
   onclick="addToCart('Door Cleaning',99); return false;">
   Book Now
</a>
</div>

<!-- CARD 3-->
<div class="card" data-category="basic" data-price="99" data-rating="5">
<img src="Fan Cleaning.jpg">
<h3>Fan Cleaning</h3>
<h5>Quantity 1</h5>
<div class="price"><del>₹200</del> <b>₹99</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Fan Cleaning',99)">
   Book Now
</a>
</div>

<!-- CARD 4-->
<div class="card" data-category="basic" data-price="199" data-rating="5">
<img src="Exhaust Fan.jpg">
<h3>Exhaust Fan Cleaning</h3>
<h5>Quantity 1</h5>
<div class="price"><del>₹300</del> <b>₹199</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Exhaust Fan Cleaning',199)">
   Book Now
</a>
</div>

<!-- CARD 5-->
<div class="card" data-category="basic" data-price="299" data-rating="5">
<img src="Sink and Faucet Cleaning.jpg">
<h3>Sink and Faucet Cleaning</h3>
<h5>Quantity 1</h5>
<div class="price"><del>₹400</del> <b>₹299</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Sink and Faucet Cleaning',299)">
   Book Now
</a>
</div>

<!-- CARD 6-->
<div class="card" data-category="basic" data-price="799" data-rating="4">
<img src="Bathroom Cleaning (Floor & wall tiles).jpg">
<h3>Bathroom Cleaning</h3>
<h5>Floor & Wall Tiles</h5>
<div class="price"><del>₹999</del> <b>₹799</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Bathroom Cleaning',799)">
   Book Now
</a>
</div>

<!-- CARD 7-->
<div class="card" data-category="premium" data-price="999" data-rating="4">
<img src="Premium Toilet Cleaning (Seat,Floor & Wall tiles).jpg">
<h3>Premium Toilet Cleaning</h3>
<h5>Seat,Floor & Wall tiles</h5>
<div class="price"><del>₹1999</del> <b>₹999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Bathroom Cleaning',999)">
   Book Now
</a>
</div>

<!-- CARD 8-->
<div class="card" data-category="premium" data-price="1299" data-rating="4">
<img src="Standard Kitchen Cleaning.jpg">
<h3>Standard Kitchen Cleaning </h3>
<h5>StandardCleaning</h5>
<div class="price"><del>₹2999</del> <b>1299</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Standard Kitchen Cleaning',1299)">
   Book Now
</a>
</div>

<!-- CARD 9-->
<div class="card" data-category="premium" data-price="1999" data-rating="4">
<img src="Floor Cleaning (dusting, sweeping, mopping all areas).jpg">
<h3>Standard Floor Cleaning</h3>
<h5>Dusting, Sweeping, Mopping all areas</h5>
<div class="price"><del>₹2999</del> <b>1999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Standard Floor Cleaning',1999)">
   Book Now
</a>
</div>

<!-- CARD 10-->
<div class="card" data-category="premium" data-price="5999" data-rating="4">
<img src="Complete Home Cleaning indoor.jpg">
<h3>Complete Home Cleaning indoor</h3>
<h5>Indoor cleaning</h5>
<div class="price"><del>₹6999</del> <b>5999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Standard Floor Cleaning',5999)">
   Book Now
</a>
</div>

<!-- CARD 11-->
<div class="card" data-category="premium" data-price="999" data-rating="5">
<img src="Premium Bedroom Deep Cleaning.jpg">
<h3>Premium Bedroom Deep Cleaning</h3>
<h5>Single Bedroom</h5>
<div class="price"><del>₹1999</del> <b>₹999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Premium Bedroom Deep Cleaning',999)">
   Book Now
</a>
</div>

<!-- CARD 12-->
<div class="card" data-category="premium" data-price="1799" data-rating="4">
<img src="Premium Kitchen cleaning.jpg">
<h3>Premium Kitchen Cleaning</h3>
<h5>Scrubbing tiles, Deep degreasing, Cabinets inside & out, Sink & Faucet Cleaning, etc</h5>
<div class="price"><del>₹2999</del> <b>1799</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Premium Kitchen Cleaning',1799)">
   Book Now
</a>
</div>

<!-- CARD 13-->
<div class="card" data-category="Commercial" data-price="20" data-rating="4">
<img src="Basic Office Cleaning.jpg">
<h3>Basic Office Cleaning</h3>
<h5>Per SQ Ft</h5>
<div class="price"><del>₹99</del> <b>20</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Basic Office Cleaning',20)">
   Book Now
</a>
</div>

<!-- CARD 14-->
<div class="card" data-category="Commercial" data-price="45" data-rating="4">
<img src="Standard Office Cleaning.jpg">
<h3>Standard Office Cleaning</h3>
<h5>Per SQ Ft</h5>
<div class="price"><del>₹199</del> <b>45</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Standard Office Cleaning',45)">
   Book Now
</a>
</div>

<!-- CARD 15-->
<div class="card" data-category="Commercial" data-price="55" data-rating="4">
<img src="Premium Office Cleaning.jpg">
<h3>Premium Office Cleaning</h3>
<h5>Per SQ Ft</h5>
<div class="price"><del>₹299</del> <b>55</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Premium Office Cleaning',55)">
   Book Now
</a>
</div>

<!-- CARD 16-->
<div class="card" data-category="deep" data-price="6499" data-rating="4">
<img src="Furnished.jpg">
<h3>Furnished House Cleaning</h3>
<h5>Less than 1200 square foot</h5>
<div class="price"><del>₹7999</del> <b>6499</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Furnished House Cleaning',6499)">
   Book Now
</a>
</div>

<!-- CARD 17-->
<div class="card" data-category="deep" data-price="10299" data-rating="4">
<img src="Furnished.jpg">
<h3>Furnished House Cleaning</h3>
<h5>From 1200 to 2000 square foot</h5>
<div class="price"><del>₹11999</del> <b>10299</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Furnished House Cleaning',10299)">
   Book Now
</a>
</div>

<!-- CARD 18-->
<div class="card" data-category="deep" data-price="15599" data-rating="4">
<img src="Furnished.jpg">
<h3>Furnished House Cleaning</h3>
<h5>From 2000 to 3000 square foot</h5>
<div class="price"><del>₹16999</del> <b>15599</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Furnished House Cleaning',15599)">
   Book Now
</a>
</div>

<!-- CARD 19-->
<div class="card" data-category="deep" data-price="5999" data-rating="4">
<img src="UnFurnished.jpg">
<h3>Unfurnished House Cleaning</h3>
<h5>Less than 1200 square foot</h5>
<div class="price"><del>₹6999</del> <b>5999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Unfurnished House Cleaning',5999)">
   Book Now
</a>
</div>

<!-- CARD 20-->
<div class="card" data-category="deep" data-price="6999" data-rating="4">
<img src="UnFurnished.jpg">
<h3>Unfurnished House Cleaning</h3>
<h5>From 1200 to 2000 square foot</h5>
<div class="price"><del>₹9999</del> <b>6999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Unfurnished House Cleaning',6999)">
   Book Now
</a>
</div>

<!-- CARD 21-->
<div class="card" data-category="deep" data-price="12599" data-rating="4">
<img src="UnFurnished.jpg">
<h3>Unfurnished House Cleaning</h3>
<h5>From 2000 to 3000 square foot</h5>
<div class="price"><del>15599</del> <b>12599</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Unfurnished House Cleaning',12599)">
   Book Now
</a>
</div>

<!-- CARD 22-->
<div class="card" data-category="shifting" data-price="2999" data-rating="4">
<img src="House Shifting.jpg">
<h3>House Shifting</h3>
<h5>Basic Local area Packing, Loading, Unloading </h5>
<div class="price"><del>5599</del> <b>2999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Unfurnished House Cleaning',2999)">
   Book Now
</a>
</div>

<!-- CARD 23-->
<div class="card" data-category="shifting" data-price="4999" data-rating="4">
<img src="House Shifting.jpg">
<h3>House Shifting</h3>
<h5>Less than 600 sqft - Packing, Loading, Unloading</h5>
<div class="price"><del>6599</del> <b>4999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Unfurnished House Cleaning',4999)">
   Book Now
</a>
</div>

<!-- CARD 24-->
<div class="card" data-category="shifting" data-price="6999" data-rating="4">
<img src="House Shifting-3.jpg">
<h3>House Shifting</h3>
<h5>Less than 1200 sqft - Packing, Loading, Unloading</h5>
<div class="price"><del>7599</del> <b>6999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Unfurnished House Cleaning',6999)">
   Book Now
</a>
</div>

<!-- CARD 25-->
<div class="card" data-category="shifting" data-price="9999" data-rating="4">
<img src="House Shifting-3.jpg">
<h3>House Shifting</h3>
<h5>1200 sqft to 2000 sqft - Packing, Loading, Unloading</h5>
<div class="price"><del>12599</del> <b>9999</b></div>
<a class="book" href="booking.html"
   onclick="addToCart('Unfurnished House Cleaning',9999)">
   Book Now
</a>
</div>
  
</div>
</div>

<div id="footer"></div>

<script src="js/cart.js"></script>

<script>

  // Function to show/hide filters on mobile
function toggleMobileFilters() {
    const filterPanel = document.querySelector('.filters');
    const toggleBtn = document.querySelector('.filter-toggle');
    filterPanel.classList.toggle('active');
    
    // Change button text
    if (filterPanel.classList.contains('active')) {
        toggleBtn.innerHTML = '<i class="fas fa-times"></i> Hide Filters';
    } else {
        toggleBtn.innerHTML = '<i class="fas fa-filter"></i> Show Filters';
    }
}
// --- 1. HEADER & FOOTER FETCHING ---
fetch("header.html")
  .then(res => res.text())
  .then(data => {
    document.getElementById("header").innerHTML = data;

    // Define mobile menu functions globally
    window.toggleMenu = (isOpen) => {
      const modal = document.getElementById('mobile-menu-modal');
      if (modal) {
        modal.classList.toggle('active', isOpen);
        document.body.style.overflow = isOpen ? 'hidden' : '';
        if (!isOpen) window.closeSub();
      }
    };

    window.openSub = (menuId) => {
      const lvl0 = document.getElementById('lvl-0');
      const subMenu = document.getElementById(menuId);
      if (lvl0 && subMenu) {
        lvl0.classList.add('shifted');
        subMenu.classList.add('active');
      }
    };

    window.closeSub = () => {
      const lvl0 = document.getElementById('lvl-0');
      if (lvl0) {
        lvl0.classList.remove('shifted');
        document.querySelectorAll('.menu-level-1').forEach(s => s.classList.remove('active'));
      }
    };

    // Update cart count once header is loaded
    if (window.updateBagCount) window.updateBagCount();
  })
  .catch(err => console.error("Header Error:", err));

fetch("footer.html")
  .then(res => res.text())
  .then(data => document.getElementById("footer").innerHTML = data)
  .catch(err => console.error("Footer Error:", err));


// --- 2. FILTERING LOGIC ---
// 1. Grab all elements
// 1. Grab local elements
const catSelect = document.getElementById("categoryFilter");
const priceSelect = document.getElementById("priceSort");
const rateSelect = document.getElementById("ratingFilter");
const allProductCards = [...document.querySelectorAll(".card")];
const productGrid = document.getElementById("productList");
const mainTitle = document.getElementById("pageHeader");

// 2. The Core Filter & Search Logic
function applyFilters() {
  // Check the URL for Hash
  const hash = window.location.hash.replace("#", "");
  if (hash) {
    const decodedHash = decodeURIComponent(hash);
    const optionExists = Array.from(catSelect.options).some(opt => opt.value === decodedHash);
    if (optionExists) catSelect.value = decodedHash;
  }

  const selectedCat = catSelect.value;
  const selectedRate = rateSelect.value;
  
  // Get search text (Look for the input in the fetched header)
  const searchInput = document.querySelector('.header-right input');
  const searchText = searchInput ? searchInput.value.toLowerCase() : "";

  // Filter the cards
  let filtered = allProductCards.filter(card => {
    const title = card.querySelector('h3').innerText.toLowerCase();
    const catMatch = selectedCat === "all" || card.dataset.category === selectedCat;
    const rateMatch = selectedRate === "all" || parseInt(card.dataset.rating) >= parseInt(selectedRate);
    const searchMatch = title.includes(searchText); // Search check
    
    return catMatch && rateMatch && searchMatch;
  });

  // Sorting
  if (priceSelect.value === "low") {
    filtered.sort((a, b) => parseFloat(a.dataset.price) - parseFloat(b.dataset.price));
  } else if (priceSelect.value === "high") {
    filtered.sort((a, b) => parseFloat(b.dataset.price) - parseFloat(a.dataset.price));
  }

  // Render
  productGrid.innerHTML = "";
  if (filtered.length > 0) {
    filtered.forEach(c => productGrid.appendChild(c));
  } else {
    productGrid.innerHTML = `<div style="text-align:center; width:100%; padding:50px;">
                                <h3>No services found</h3>
                                <p>Try adjusting your search or filters</p>
                             </div>`;
  }

  // Update Title
  mainTitle.innerText = selectedCat === "all" ? "All Services" : catSelect.options[catSelect.selectedIndex].text;
}

// 3. Fetch Header & Set up Search Event
fetch("header.html")
  .then(res => res.text())
  .then(data => {
    document.getElementById("header").innerHTML = data;
    
    // NOW the search bar exists, we can add the event listener
    const searchBar = document.querySelector('.header-right input');
    if(searchBar) {
      searchBar.addEventListener('input', applyFilters);
    }

    // Standard header functions (menu etc)
    window.toggleMenu = (isOpen) => { /* ... your existing code ... */ };
    if (window.updateBagCount) window.updateBagCount();
  });

// 4. Standard Event Listeners
catSelect.onchange = priceSelect.onchange = rateSelect.onchange = applyFilters;
window.addEventListener("hashchange", applyFilters);
window.addEventListener("DOMContentLoaded", applyFilters);
</script>

</body>
</html>
